.. image:: https://github.com/collective/collective.eeafaceted.dashboard/actions/workflows/main.yml/badge.svg?branch=master
    :target: https://github.com/collective/collective.eeafaceted.dashboard/actions/workflows/main.yml

.. image:: https://coveralls.io/repos/collective/collective.eeafaceted.dashboard/badge.svg?branch=master
   :target: https://coveralls.io/r/collective/collective.eeafaceted.dashboard?branch=master

.. image:: https://img.shields.io/pypi/v/collective.eeafaceted.dashboard.svg
   :alt: PyPI badge
   :target: https://pypi.org/project/collective.eeafaceted.dashboard


collective.eeafaceted.dashboard
===============================

This package does the glue between :

- `collective.eeafaceted.collectionwidget <https://github.com/collective/collective.eeafaceted.collectionwidget>`_
- `collective.eeafaceted.z3ctable <https://github.com/collective/collective.eeafaceted.z3ctable>`_
- `collective.compoundcriterion <https://github.com/collective/collective.compoundcriterion>`_
- `collective.documentgenerator <https://github.com/collective/collective.documentgenerator>`_

This build a useable eea.facetednavigation based dashboard (works on both Plone 4.3.x and Plone 5.x).  Use the demo profile to easily check what it does :

.. image:: https://github.com/IMIO/collective.eeafaceted.dashboard/blob/master/doc/screenshots/application.png

.. image:: https://github.com/IMIO/collective.eeafaceted.dashboard/blob/master/doc/screenshots/review.png

Dashboard is essentially made of a faceted widget displaying pre-configured searches, results are displayed in a faceted layout using a table.

The searches filter (collective.eeafaceted.collectionwidget) :
--------------------------------------------------------------

This filter aims to display "functional and already well thought" searches to users.

- this filter uses the collective.eeafaceted.collectionwidget that is a faceted navigation widget displaying a list of searches stored in current folder;
- searches stored in folder are elements of type DashboardCollection (based on plone.app.contenttypes Collection) with 3 specific fields "Show number of items in filter?", "Enabled?" and "Condition" (let's Managers enter a TAL expression to define to who this search will be displayed in the collection faceted filter);
- it is possible to display the count information on a per search basis (here it is enabled for "Elements to review" and "Expired elements" searches);
- the current page title changes depending on selected search;
- a default search can be selected so it is executed when user access the dashboard.

The table faceted layout (collective.eeafaceted.z3ctable) :
-----------------------------------------------------------

Every faceted layout can be selected to display the dashboard results but collective.eeafaceted.z3ctable add a new faceted layout that displays a z3c.table with sortable columns (using the sort icons in the column header) and a selection column.

- columns may be selected on the defined DashboardCollections so different columns may be displayed for different searches;
- a "refresh search results" is available so user may refresh the faceted layout without having to reload the entire page;
- the selection column is useable with collective.documentgenerator or collection.eeafaceted.batchactions for example.

Managing complex searches (collective.compoundcriterion) :
----------------------------------------------------------

This package rely on collective.compoundcriterion, it adds a new search criterion called "Filter" for Collections that will let user select a named adapter registered for the ICompoundCriterionFilter.  This adapter returns a catalog query compatible with a Collection query.  This makes it possible to manage complex searches that are not configurable on a Collection using the querywidget.

Document generation (collective.documentgenerator) :
----------------------------------------------------

Dashboard integrates the colletive.documentgenerator package that makes it possible to export a dashboard in any format supported by collective.documentgenerator (odt, doc, docx, ods, xls, pdf, ...).  Exportable documents are managed by DashboardPODTemplates added in the dashboard folder.

- it is possible to restrict exportation templates to specific dashboard searches;
- as for DashboardCollections, it is possible to define a availability condition so document may only be generated by some users.

TODO :
------
- integrate collective.eeafaceted.batchactions when it will work on Plone 5 (integration is already possible on Plone 4).


